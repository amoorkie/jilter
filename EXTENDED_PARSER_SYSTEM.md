# 🎨 Расширенная система парсинга дизайнерских вакансий

## 📋 Обзор системы

Расширенная система для сбора, анализа и модерации дизайнерских вакансий с **6 источников** и автоматическим мониторингом.

## 🔧 Новые источники

### 1. **Хабр Карьера** (`career.habr.com`)
- **URL**: https://career.habr.com/vacancies?type=suitable
- **Особенности**: Крупная IT-платформа, качественные вакансии
- **Парсер**: `src/lib/parsers/habr/parser.ts`
- **Ключевые слова**: дизайнер, ui/ux, продуктовый дизайн

### 2. **Designer.ru** (`designer.ru`)
- **URL**: https://designer.ru/
- **Особенности**: Специализированный сайт для дизайнеров
- **Парсер**: `src/lib/parsers/designer-ru/parser.ts`
- **Ключевые слова**: дизайнер, графический дизайн, веб-дизайн

### 3. **GetMatch** (`getmatch.ru`)
- **URL**: https://getmatch.ru/vacancies?p=1&sa=150000&l=remote&l=moscow&sp=product_design&pa=all
- **Особенности**: Платформа для поиска работы с фильтрами
- **Парсер**: `src/lib/parsers/getmatch/parser.ts`
- **Ключевые слова**: product_design, удаленная работа

### 4. **Telegram-каналы** (`t.me/designhunters`)
- **Особенности**: Telegram-каналы с вакансиями
- **Парсер**: `src/lib/parsers/telegram/parser.ts`
- **Методы**: Bot API, RSS-фиды

## 🚀 Система мониторинга

### Конфигурация мониторинга:
```typescript
const config = {
  fullScanInterval: 4 * 60 * 60 * 1000, // 4 часа - полный парсинг
  quickScanInterval: 60 * 60 * 1000,    // 1 час - быстрый парсинг
  maxVacanciesPerSource: 50,
  maxTotalVacancies: 200,
  enableAIAnalysis: true,
  aiAnalysisBatchSize: 10,
  enableNotifications: true,
  notificationThreshold: 5
};
```

### Режимы работы:

#### 🔍 **Полный парсинг** (каждые 4 часа)
- Парсинг всех 6 источников
- AI анализ всех вакансий
- Сохранение в базу данных
- Уведомления о новых вакансиях

#### ⚡ **Быстрый парсинг** (каждый час)
- Парсинг только основных источников (HH.ru, Хабр Карьера)
- Проверка только новых вакансий
- Быстрое обновление базы

## 📊 Архитектура системы

```
┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐
│   Источники     │    │    Парсеры      │    │   Мониторинг    │
├─────────────────┤    ├─────────────────┤    ├─────────────────┤
│ • HH.ru         │───▶│ • HH Parser     │───▶│ • Scheduler     │
│ • Geekjob       │    │ • Geekjob Parser│    │ • Full Scan     │
│ • HireHi        │    │ • HireHi Parser │    │ • Quick Scan    │
│ • Хабр Карьера  │    │ • Habr Parser   │    │ • AI Analysis   │
│ • Designer.ru   │    │ • Designer Parser│   │ • Notifications │
│ • GetMatch      │    │ • GetMatch Parser│    │                 │
│ • Telegram      │    │ • Telegram Parser│    │                 │
└─────────────────┘    └─────────────────┘    └─────────────────┘
                                │
                                ▼
                       ┌─────────────────┐
                       │   База данных   │
                       ├─────────────────┤
                       │ • SQLite        │
                       │ • AI Analysis   │
                       │ • Moderation    │
                       │ • Status Track  │
                       └─────────────────┘
```

## 🎯 Workflow системы

### 1. **Инициализация**
```bash
# Первоначальное заполнение базы данных
node scripts/initial-populate.js
```

### 2. **Мониторинг**
```typescript
// Запуск мониторинга
POST /api/monitoring/start

// Остановка мониторинга  
POST /api/monitoring/stop

// Статистика
GET /api/monitoring/stats
```

### 3. **Парсинг источников**
```typescript
// Полный парсинг всех источников
const vacancies = await parseAllDesignVacancies(200);

// Парсинг конкретного источника
const habrVacancies = await parseHabrVacancies('дизайнер', 3);
```

### 4. **AI Анализ**
```typescript
// Анализ вакансии с DeepSeek
const analysis = await analyzeVacancyWithDeepSeek(
  vacancy.title,
  vacancy.description,
  vacancy.company
);
```

### 5. **Модерация**
- Админ заходит на `/admin`
- Просматривает вакансии с AI анализом
- Принимает решение: одобрить/отклонить
- Одобренные вакансии появляются на сайте

## 📈 Статистика и мониторинг

### Метрики системы:
- **Всего вакансий** в базе данных
- **Ожидают модерации** (новые вакансии)
- **Одобрены** (показываются на сайте)
- **Отклонены** (скрыты с сайта)
- **Статус мониторинга** (активен/неактивен)

### Логирование:
```
🎯 Начинаем парсинг дизайнерских вакансий со всех источников
📊 Целевое количество: 200

🔍 Парсинг с основных источников...
✅ HH.ru: 15 вакансий
✅ Geekjob: 8 вакансий  
✅ HireHi: 12 вакансий
✅ Хабр Карьера: 25 вакансий
✅ Designer.ru: 18 вакансий
✅ GetMatch: 10 вакансий

🤖 Запускаем AI анализ 88 вакансий
📦 Обрабатываем батч 1/9 (10 вакансий)
✅ AI анализ завершен

💾 Сохраняем 88 вакансий в базу данных
✅ Сохранено: 88, пропущено: 0

🎉 Парсинг завершен!
📊 Всего найдено: 88 вакансий
📊 Уникальных: 88 вакансий
```

## 🔧 Настройка и развертывание

### Переменные окружения:
```bash
# DeepSeek API (для AI анализа)
QWEN_API_KEY=your_deepseek_api_key

# Telegram Bot (для парсинга каналов)
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# База данных
DATABASE_URL=file:./data/vacancies.db
```

### Запуск системы:
```bash
# 1. Установка зависимостей
npm install

# 2. Настройка переменных окружения
cp env-example.txt .env.local

# 3. Первоначальное заполнение
node scripts/initial-populate.js

# 4. Запуск сервера
npm run dev

# 5. Запуск мониторинга
curl -X POST http://localhost:3000/api/monitoring/start
```

## 📊 Ожидаемые результаты

### Количество вакансий:
- **HH.ru**: 15-25 вакансий
- **Хабр Карьера**: 20-30 вакансий  
- **Designer.ru**: 10-20 вакансий
- **Geekjob**: 5-15 вакансий
- **HireHi**: 8-15 вакансий
- **GetMatch**: 5-10 вакансий
- **Telegram**: 3-8 вакансий

**Итого**: 66-123 вакансии за полный парсинг

### Качество вакансий:
- ✅ **Релевантность**: Фильтрация по ключевым словам
- ✅ **Актуальность**: Парсинг за последние 3 дня
- ✅ **AI Анализ**: Классификация специализации, опыта, технологий
- ✅ **Модерация**: Ручная проверка качества

## 🎯 Преимущества расширенной системы

### 1. **Больше источников**
- 6 источников вместо 3
- Специализированные платформы для дизайнеров
- Telegram-каналы для оперативных вакансий

### 2. **Автоматический мониторинг**
- Парсинг каждые 4 часа
- Быстрые обновления каждый час
- Уведомления о новых вакансиях

### 3. **Улучшенное качество**
- Более точная фильтрация
- AI анализ всех вакансий
- Система модерации

### 4. **Масштабируемость**
- Легко добавлять новые источники
- Настраиваемые интервалы мониторинга
- Гибкая конфигурация

## 🚀 Следующие шаги

1. **Мониторинг качества** - отслеживание релевантности
2. **Расширение источников** - добавление новых сайтов
3. **Улучшение AI** - более точная классификация
4. **Аналитика** - детальная статистика по источникам
5. **Уведомления** - интеграция с Telegram, email, Slack














